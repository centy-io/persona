---
displayNumber: 4
status: open
priority: 1
createdAt: 2026-02-25T19:24:19.241463+00:00
updatedAt: 2026-02-25T19:39:10.925629+00:00
---

# Implement `init` command

## Overview
Implement the `persona init` command. This is the core feature of the CLI. It registers two custom item types with the centy daemon for the current project: `persona` and `story`.

The centy daemon runs locally at `127.0.0.1:50051` and exposes its API over gRPC. All communication with the daemon is done via gRPC using `@grpc/grpc-js` and `@grpc/proto-loader`. Specifically, this command calls the `CreateItemType` RPC defined in the centy daemon's proto (`proto/centy/v1/centy.proto`).

## Item Type Definitions

### `persona`
Represents a user persona — a fictional character that embodies a user segment.
Suggested fields:
- title (built-in)
- body / description (built-in)
- role (custom field, string)
- goals (custom field, string)
- pain-points (custom field, string)

### `story`
Represents a user story tied to a persona.
Suggested fields:
- title (built-in)
- body (built-in, markdown — "As a [persona], I want...")
- persona (custom field, reference or string)
- acceptance-criteria (custom field, markdown)

## Tasks
- Create `src/commands/init.ts` as an oclif command
- Import the shared gRPC client from `src/daemon-client.ts` (see issue #2)
- Call the `CreateItemType` RPC on the centy daemon for both `persona` and `story` types
- Show clear success/error output for each type created
- Handle the case where the types already exist gracefully (idempotent) — the daemon returns an `ALREADY_EXISTS` gRPC status code in this case
- Add a `--project` flag to target a specific project path (default: cwd)
- Add a `--port` flag to override the daemon port (default: `50051`)

## Acceptance Criteria
- Running `persona init` in a centy-tracked project creates both `persona` and `story` item types via gRPC calls to the centy daemon
- Running it twice does not error — idempotent behavior (handles `ALREADY_EXISTS` gracefully)
- Help text (`persona init --help`) is clear and accurate
- Fails with a clear error message if the daemon is not reachable
